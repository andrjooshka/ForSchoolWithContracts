<html t:type="layout"
		t:pageTitle="Клиенты"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">
    
    <ul class="nav child">
		<t:pagelink page="clients">
			<li>Сводка</li>
		</t:pagelink>
		<t:pagelink page="reports" class="activeMenuItem last">
			<li>Отчеты</li>
		</t:pagelink>
	</ul>
    
      
	<span style="position: absolute; top: 90px; right: 70px;">
		<t:form>
			<t:checkbox t:id="switchPages" value="switchPages" onclick="this.form.submit();"/>
			<t:label for="switchPages"/>
		</t:form>
	</span>
      
	<div style="margin-top:60px;">
	  	<h3>Осталось не более 2 занятий</h3>
	  	<t:grid source="endingLessons" model="modelOfEnding" row="client" 
	  	pagerPosition="${pagerPosition}" rowsPerPage="${rows}">
	  		<p:nameCell>
	  			<t:eventlink event="details" context="client">${client.name}</t:eventlink>
	  		</p:nameCell>
	  		<p:endingInfoCell>
	  			${endingInfo}
	  		</p:endingInfoCell>
	  	</t:grid>
	</div>
	  
	<div style="margin-top:30px;">
	  	<h3>Платеж в ближайшие 2 недели</h3>
	  	<t:grid source="schedPayments" model="modelOfPayments" row="client" 
	  	pagerPosition="${pagerPosition}" rowsPerPage="${rows}">
	  		<p:nameCell>
	  			<t:eventlink event="details" context="client">${client.name}</t:eventlink>
	  		</p:nameCell>
	  		<p:paymentsInfoCell>
	  			${paymentInfo}
	  			<t:zone t:id="paymentzone" id="${client.id}payment">
	  				<t:if test="editingPayment">
	  					<t:editors.addpayment t:id="paymenteditor" />
	  					<p:else>
	  						<t:eventlink context="client" event="editPayment" zone="${client.id}payment">
	  							Редактировать первый платеж.
	  						</t:eventlink>
	  					</p:else>
	  				</t:if>
	  			</t:zone>
	  		</p:paymentsInfoCell>
	  	</t:grid>
	</div>
	  
	<div style="margin-top:30px;">
		<h3>Должники</h3>
	  	<t:grid source="debtors" model="modelOfDebtors" row="client" 
	  	pagerPosition="${pagerPosition}" rowsPerPage="${rows}">
	  		<p:nameCell>
	  			<t:eventlink event="details" context="client">${client.name}</t:eventlink>
	  		</p:nameCell>
	  		<p:debtInfoCell>
	  			${debtInfo}
			</p:debtInfoCell>
		</t:grid>
	</div>
      
</html>
