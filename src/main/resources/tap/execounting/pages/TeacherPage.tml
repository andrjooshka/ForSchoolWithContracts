<html t:type="layout"
      t:pageTitle="Учителя : ${tMed.name}"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">

	<h3>${tMed.name}</h3>
	<h4 style="margin-top: 38px; margin-bottom:8px;">Расписание</h4>
	<a href="#" t:type="actionlink" t:id="scheduleEditLink" t:zone="scheduleZone">Изменить</a>
	
	<t:zone t:id="scheduleZone" id="scheduleZone" update="show">
		<t:if test="scheduleEdit">
			<t:form t:id="scheduleForm" zone="scheduleZone">
				<t:errors/>
				<table id="scheduleTable">
					<thead>
						<tr>
							<th t:type="loop" t:source="days" t:value="day">${day}</th>
						</tr>
					</thead>
					<tbody>		
						<tr>
							<td class="withselect"><input t:type="select" t:model="facilitySelectModel" t:value="tMed.unit.monday"/></td>
							<td class="withselect"><input t:type="select" t:model="facilitySelectModel" t:value="tMed.unit.tuesday"/></td>
							<td class="withselect"><input t:type="select" t:model="facilitySelectModel" t:value="tMed.unit.wednesday"/></td>
							<td class="withselect"><input t:type="select" t:model="facilitySelectModel" t:value="tMed.unit.thursday"/></td>
							<td class="withselect"><input t:type="select" t:model="facilitySelectModel" t:value="tMed.unit.friday"/></td>
							<td class="withselect"><input t:type="select" t:model="facilitySelectModel" t:value="tMed.unit.saturday"/></td>
							<td class="withselect"><input t:type="select" t:model="facilitySelectModel" t:value="tMed.unit.sunday"/></td>
						</tr>
						<tr>
							<td colspan="7" ><t:submit value="Сохранить" /></td>
						</tr>
					</tbody>
				</table>
			</t:form>
		</t:if>	
		
		<t:if test="!scheduleEdit">	
			<table id="scheduleTable">
				<thead>
					<tr>
						<th t:type="loop" t:source="days" t:value="day">${day}</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td t:type="loop" t:source="days" t:value="day">${school}</td>
					</tr>
				</tbody>
			</table>
		</t:if>
	</t:zone>
	
	<!--CLIENTS-->
	
	<h3 style="margin-top: 70px; margin-bottom: 20px;">${message:clients}</h3>
	
	<t:zone t:id="clientsZone" id="clientsZone">
		<t:if test="calendarCentric">
			<div style="display: inline-table; width:130px; height: 45px;
					text-align: right;padding-right: 30px;"><h4 style="font-size: 1.6em">${monthName}</h4></div>
			<div class="calendar" style="display: inline-table;">
				<t:show.EventRow displayNull="true" displayDate="true" elements="dates"/></div>	
		</t:if>
		
		<div t:type="loop" t:source="contracts" t:value="contract" class="" style="height: 70px;">
				<div style="display: inline-table; width:150px; height: 45px;
				text-align: right;padding-right: 10px;">${clientName}</div>
				<t:show.EventRow displayNull="true" elements="elements"/>
		</div>
	</t:zone>
	
	<!--/CLIENTS-->
		
	<h3 style="margin-top: 70px; margin-bottom: 20px;">${message:stats}</h3>
	<t:zone t:id="statsZone" id="statsZone">
		<t:form t:id="statsDateForm" zone="statsZone">
			<t:label for="date1" style="margin: 5px;"/>
			<t:datefield t:id="date1"/>
			<t:label for="date2" style="margin: 5px; margin-left: 25px;"/>
			<t:datefield t:id="date2"/>
			<t:submit style="margin-left: 20px;" />
		</t:form>
		<table>
			<tr>
				<th>
					Проведено уроков
				</th>
				<td>
					${lessonsComplete}
				</td>
				
				<th>
					Отработано дней
				</th>
				<td>
					${daysWorked}
				</td>
			</tr>
			
			<tr>
				<th>
					Отменено занятий
				</th>
				<td>
					${lessonsFailed}
				</td>
				
				<th></th>
				<td></td>
			</tr>
			
			<tr>
				<th>
					Из-за клиента
				</th>
				<td>
					${lessonsFailedByClient}
				</td>
				
				<th>
					Из-за педагога
				</th>
				<td>
					${lessonsFailedByTeacher}
				</td>
			</tr>
			<tr>
				<th>
					Заработал денег
				</th>
				<td>
					${moneyEarned}
				</td>
				
				<th>
				</th>
				<td>
					
				</td>
			</tr>
			
			<tr>
				<th>
					Для школы
				</th>
				<td>
					${moneyEarnedForSchool}
				</td>
				
				<th>
					Для себя
				</th>
				<td>
					${moneyEarnedForSelf}
				</td>
			</tr>
		</table>
	</t:zone>
	
	<t:zone id="commentsZone">
		t:loop source="comments" value="comment"
			t:comment showHidden="showHidden" commentId="comment.id" /
		/t:loop
	</t:zone>
	
	<h4>Долги по перенесенным занятиям</h4>
		t:loop source="shiftedLessons" value="lesson"
			t:wideshowevent lessonId="lesson.id"/
		/t:loop

</html>