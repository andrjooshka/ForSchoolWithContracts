<html t:type="layout"
      t:pageTitle="Учителя : ${tMed.name}"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter"
      xmlns:ex="tapestry-library:exanpe">

	<h3>${tMed.name}</h3>
	<h4 style="margin-top: 38px; margin-bottom:8px;">Расписание</h4>
	<a href="#" t:type="actionlink" t:id="scheduleEditLink" t:zone="scheduleZone">Изменить</a>
	
	<t:zone t:id="scheduleZone" id="scheduleZone" update="show">
		<t:if test="scheduleEdit">
			<t:form t:id="scheduleForm" zone="scheduleZone">
				<t:errors/>
				<table id="scheduleTable">
					<thead>
						<tr>
							<th t:type="loop" t:source="days" t:value="day">${day}</th>
						</tr>
					</thead>
					<tbody>		
						<tr>
							<td class="withselect"><input t:type="select" t:model="facilitySelectModel" t:value="tMed.unit.monday"/></td>
							<td class="withselect"><input t:type="select" t:model="facilitySelectModel" t:value="tMed.unit.tuesday"/></td>
							<td class="withselect"><input t:type="select" t:model="facilitySelectModel" t:value="tMed.unit.wednesday"/></td>
							<td class="withselect"><input t:type="select" t:model="facilitySelectModel" t:value="tMed.unit.thursday"/></td>
							<td class="withselect"><input t:type="select" t:model="facilitySelectModel" t:value="tMed.unit.friday"/></td>
							<td class="withselect"><input t:type="select" t:model="facilitySelectModel" t:value="tMed.unit.saturday"/></td>
							<td class="withselect"><input t:type="select" t:model="facilitySelectModel" t:value="tMed.unit.sunday"/></td>
						</tr>
						<tr>
							<td colspan="7" ><t:submit value="Сохранить" /></td>
						</tr>
					</tbody>
				</table>
			</t:form>
		</t:if>	
		
		<t:if test="!scheduleEdit">	
			<table id="scheduleTable">
				<thead>
					<tr>
						<th t:type="loop" t:source="days" t:value="day">${day}</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td t:type="loop" t:source="days" t:value="day">${school}</td>
					</tr>
				</tbody>
			</table>
		</t:if>
	</t:zone>
	
	<!--CLIENTS-->
	
	<h3 style="margin-top: 70px; margin-bottom: 20px;">${message:clients}</h3>
	

	
	
	<t:zone t:id="clientsZone" id="clientsZone" update="show">
		<t:if test="calendarCentric">
			<t:actionlink t:id="eventsDateBackwardLink" zone="clientsZone">На месяц назад</t:actionlink>&nbsp;&nbsp;&nbsp;
			<t:actionlink t:id="eventsDateForwardLink" zone="clientsZone">На месяц вперед</t:actionlink>
			<t:form zone="clientsZone" t:id="clientsDateForm">
				<t:errors/>
				<t:datefield value="eventsDate"/>
				<t:submit style="margin-left:15px;"/>
			</t:form>
			
			<div style="display: inline-table; width:130px; height: 45px;
					text-align: right;padding-right: 30px;"><h4 style="font-size: 1.6em">${monthName}</h4></div>
			<div class="calendar" style="display: inline-table;">
				<t:show.EventRow displayNull="true" displayDate="true" elements="dates"/></div>	
		</t:if>
		
		
		<t:loop t:source="contracts" t:value="contract" class="" style="height: 110px;">
			<div style="margin-top:20px;">
				<t:zone t:id="contractZone" id="contractZone${contract.id}" update="show">
					<div style="display: inline-table; width:150px; height: 45px;
					text-align: right;padding-right: 10px;">${clientName}
					<br/>
					${discipline}
					</div>
					<t:show.EventRow displayNull="true" displayDate="true" elements="elements"/>
					
				</t:zone>
			</div>
			<div>
					<ex:accordion style="width:800px;">
						<ex:accordionItem title="literal:Детали">
							<t:actionlink context="contract.client" t:id="clientpagelink">
								Перейти на страницу клиента
							</t:actionlink>
							<t:show.showcontract contract="contract"/>
						</ex:accordionItem>
					</ex:accordion>
			</div>
		</t:loop>
	</t:zone>
	
	<!--/CLIENTS-->
		
	<h3 style="margin-top: 70px; margin-bottom: 20px;">${message:stats}</h3>
	<t:zone t:id="statsZone" id="statsZone">
		<t:form t:id="statsDateForm" zone="statsZone">
			<t:label for="date1" style="margin: 5px;"/>
			<t:datefield t:id="date1"/>
			<t:label for="date2" style="margin: 5px; margin-left: 25px;"/>
			<t:datefield t:id="date2"/>
			<t:submit style="margin-left: 20px;" />
		</t:form>
		<table>
			<tr>
				<th>
					Проведено уроков
				</th>
				<td>
					${lessonsComplete}
				</td>
				
				<th>
					Отработано дней
				</th>
				<td>
					${daysWorked}
				</td>
			</tr>
			
			<tr>
				<th>
					Отменено занятий
				</th>
				<td>
					${lessonsFailed}
				</td>
				
				<th></th>
				<td></td>
			</tr>
			
			<tr>
				<th>
					Из-за клиента
				</th>
				<td>
					${lessonsFailedByClient}
				</td>
				
				<th>
					Из-за педагога
				</th>
				<td>
					${lessonsFailedByTeacher}
				</td>
			</tr>
			<tr>
				<th>
					Заработал денег
				</th>
				<td>
					${moneyEarned}
				</td>
				
				<th>
				</th>
				<td>
					
				</td>
			</tr>
			
			<tr>
				<th>
					Для школы
				</th>
				<td>
					${moneyEarnedForSchool}
				</td>
				
				<th>
					Для себя
				</th>
				<td>
					${moneyEarnedForSelf}
				</td>
			</tr>
		</table>
	</t:zone>
	
	<h4>Комментарии:</h4>
	<t:editors.addcomment t:id="addComment" code="0" entityid="tMed.unit.id" />
	<t:zone id="commentsZone">
		<t:loop source="comments" value="comment">
			<t:show.showcomment showDeleted="showDeleted" comment="comment" />
		</t:loop>
	</t:zone>
	
	<h4>Долги по перенесенным занятиям:</h4>
	<t:loop source="shiftedLessons" value="lesson">
		<t:show.wideshowevent lesson="lesson"/>
	</t:loop>

</html>

















