<html t:type="layout" t:pageTitle="Клиенты" 
	xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd" 
	xmlns:p="tapestry:parameter">
	
	<ul class="nav child">
		<t:pagelink page="reports" class="last">
			<li>Отчеты</li>
		</t:pagelink>
	</ul>
	
	<t:form>
		<h4>Фильтры</h4>
		<table class="filters">
			<tr>
				<th colspan="2" class="rb">
					Планируемые платежи
				</th>
				<th colspan="2">
					С нами с
				</th>
			</tr>
			<tr>
				<th>
					Не раньше
				</th>
				<th class="rb">
					Не позже
				</th>
				<th>
					Не раньше
				</th>
				<th>
					Не позже
				</th>
				<th/>
			</tr>
			<tr class="bb">
				<td>
					<t:datefield value="earlyDate"/>
				</td>
				<td class="rb">
					<t:datefield value="laterDate"/>
				</td>
				<td>
					<t:datefield value="fcEarlyDate"/>
				</td>
				<td>
					<t:datefield value="fcLaterDate"/>
				</td>
				<td/>
			</tr>
			
			<tr>
				<td colspan="4" style="height: 20px" />
			</tr>
			
			<tr>
				<th>
					Имя
				</th>
				<th>
					Новичок/Продливший
				</th>
				<th>
					Тип договора
				</th>
				<th>
					Платежи. Не раньше:
				</th>
				<th>
					Платежи. Не позже:
				</th>
			</tr>
			<tr>
				<td>
					<t:textfield value="name"/>
				</td>
				<td>
					<t:select t:id="studStatus" model="literal:новичок,продливший"/>
				</td>
				<td>
					<t:select t:id="contractType" model="contractTypeIdsModel" value="contractTypeId"/>
				</td>
				<td>
					<t:datefield value="pfEarlierDate"/>
				</td>
				<td>
					<t:datefield value="pfLaterDate"/>
				</td>
			</tr>
		</table>
		<t:submit value="message:submitfilter-label" zone="gridzone" />
	</t:form>
	
	<t:zone t:id="statZone">
		<h4>Счетчики</h4>
		<table class="filters">
			<tr>
				<th colspan="3" style="border-right: 1px solid #303030;">
					<strong>Договора</strong>
				</th>
				
				<th colspan="3" style="border-right: 1px solid #303030;">
					<strong>Клиенты</strong>
				</th>
			</tr>
			<tr>
				<th>
					Активных
				</th>
				<th>
					Заморожено
				</th>
				<th style="border-right: 1px solid #303030;">
					Всего
				</th>
				
				<th>
					Новых
				</th>
				<th>
					Продливших
				</th>
				<th style="border-right: 1px solid #303030;">
					Всего
				</th>
				<th>
					Финансовые поступления
				</th>
			</tr>
			<tr>
				<td>
					${activeContracts}
				</td>
				<td>
					${freezedContracts}
				</td>
				<td style="border-right: 1px solid #303030;">
					${totalContracts}
				</td>
				
				<td>
					${newClients}
				</td>
				<td>
					${expClients}
				</td>
				<td style="border-right: 1px solid #303030;">
					${totalClients}
				</td>
				<td>
					${totalPayments}
				</td>
			</tr>
		</table>
	</t:zone>
	
	<br/>
	<br/>
	<t:zone t:id="gridzone">
		<t:grids.ClientGridNCD source="clients"/>
	</t:zone>
	
	
</html>
